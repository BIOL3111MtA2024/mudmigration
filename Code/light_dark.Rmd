---
title: "R Notebook"
output: html_notebook
---


# Loading Packages 
```{r loading_packages}
#install.packages("tidyverse", "knitr", "here", "ggplot2")
library(tidyverse) 
library(knitr)
library(googlesheets4)
library(googledrive)
library(ggplot2)
#library(dplyr)
```

# chl_data
Loading in the data from our personal computer files. Edit here if we need to switch what data is being used.
```{r accessing_data}
gs4_deauth()
googlesheet_url <- "https://docs.google.com/spreadsheets/d/16DxWZhYw69ZgACGu82szN9tpgpYYPWIxPXOcSLM2Bo0/edit?usp=sharing"
chl_data <- read_sheet(googlesheet_url, sheet = "vert_migration")
```

# Transforming our numbers into Chl/cm^2
We need to make it so that we are looking directly at how much chlorophyll per cm^2. I don't know how to do this calculation with VolSol.
I am going to make preliminary graphs by dividing off the Tissue Area and timesing by VolSol. When we know correct calculations, we can change this.
This will go into a new column called Chl_cm2
Instructions for the chlorophyll calculations come from CampbellSOP28ChlorophyllaTurner.pdf
 7.0314 RFU/ug L-1 and intercept of 0.9791
 
```{r chlorophyll_calculations}
chl_data$Chl_ugL <- (chl_data$Fluorescence_Reading/7.0314) -0.9791
chl_data$Chl_ugcm2 <- (chl_data$Chl_ugL*chl_data$VolSol_mL/1000) / chl_data$Tissue_Area_cm2
kable(chl_data)
```

# Sorting the data
 
```{r filter_data}
filtered_data <- filter(chl_data, Chl_ugcm2 > 0, YYYYMMDDHHMM == 202410101430)
filtered_data$Light_Temp <- factor(paste(filtered_data$Temp_C, filtered_data$Light))

Thresholds <- c('top', 'bottom')
ThresholdColours <- c("green","pink")
```

#  Graph 
```{r graph}
filtered_data %>%
  ggplot() +
  geom_point(aes(x = as.factor(Light_Temp), y = Chl_ugcm2, colour = as.factor(Top_Bottom))) +
  theme_bw() +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1)) +
  scale_colour_manual(values = ThresholdColours)

 
```




